"use strict";var fs=require("fs"),path=require("path"),config=require(path.resolve(__dirname)+"/../../dryfile.json");module.exports={run:function(){if(!config)throw new Error('There must be a "dryfile.json" at the root of your project');if(!config.src)throw new Error('"src" must be defined');if(!config.output)throw new Error('"output" must be defined');if(!config.output.js)throw new Error('"output.js" must be defined');if(!config.output.scss)throw new Error('"output.scss" must be defined');var t;try{var r=fs.readFileSync(config.src,"utf8");t=JSON.parse(r)}catch(t){throw new Error('"src" must point to a valid JSON file')}var e="// This file is automatically generated with Dryist; do not edit it manually.\n\n",o=e;Object.keys(t).forEach(function(r){o+="export const ".concat(r.replace(/-/g,"_")," = ").concat(t[r][0],";\n")});try{fs.writeFileSync(config.output.js,o)}catch(t){throw new Error('"output.js" must be a valid filepath')}var c=e;Object.keys(t).forEach(function(r){c+="$".concat(r,": ").concat(t[r][0]).concat(t[r][1],";\n")});try{fs.writeFileSync(config.output.scss,c)}catch(t){throw new Error('"output.scss" must be a valid filepath')}}};